<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title></title>
<link rel="stylesheet" href="../bower_components/mocha/mocha.css" type="text/css"
    media="screen" title="no title" charset="utf-8">
</head>
<body>
    <script src="../bower_components/requirejs/require.js" type="text/javascript"
        charset="utf-8"></script>
    <script src="../bower_components/mocha/mocha.js" type="text/javascript"
        charset="utf-8"></script>
    <script src="../bower_components/expect/index.js" type="text/javascript"
        charset="utf-8"></script>
    <!-- Common config -->
    <script src="../app/scripts/config.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">
                    require.config({
                        baseUrl : '../temp/local/scripts/',
                        shim: {
                            sinon: {
                                'exports': 'sinon'
                            },
                            'sinon-fakeTimers': {
                                'deps': [ 'sinon' ],
                                'exports': 'sinon'
                            }
                        },
                        paths: {
                            'sinon' : "../../../bower_components/sinon/lib/sinon",
                            'sinon-fakeTimers': '../../../bower_components/sinon/lib/sinon/util/fake_timers'
                        }
                    });

                    mocha.setup({
                        ui : 'bdd',
                        // ignore jquery global leak
                        globals : [ 'jQuery*',
                                    // these are generated by iframes on certain browsers
                                    'iframe1', 'iframe2', 'iframe3',
                                    '0', '1', '2',
                                    'check*', 'FileReader', 'yt', 'YT', 'addEventListener', '_gaq' ]
                    });


                    // Source: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind#Polyfill
                    if (!Function.prototype.bind) {
                        Function.prototype.bind = function(oThis) {
                            if (typeof this !== 'function') {
                                // closest thing possible to the ECMAScript 5
                                // internal IsCallable function
                                throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');
                            }

                            var aArgs   = Array.prototype.slice.call(arguments, 1),
                                fToBind = this,
                                fNOP    = function() {},
                                fBound  = function() {
                                    return fToBind.apply(this instanceof fNOP && oThis
                                            ? this
                                            : oThis,
                                        aArgs.concat(Array.prototype.slice.call(arguments)));
                                };

                            fNOP.prototype = this.prototype;
                            fBound.prototype = new fNOP();

                            return fBound;
                        };
                    }

                    var runMocha = function() {
                        mocha.run();
                    };
                    require([ '../../../test/specs/test' ],
                            runMocha);
                </script>
    <div id="mocha"></div>
</body>
</html>
